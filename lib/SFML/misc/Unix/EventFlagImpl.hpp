#ifndef SFML_EVENTFLAGIMPL_HPP
#define SFML_EVENTFLAGIMPL_HPP

////////////////////////////////////////////////////////////
// Headers
////////////////////////////////////////////////////////////
#include <SFML/System/NonCopyable.hpp>
#include <pthread.h>

namespace sf
{
namespace priv
{
#define INFINITE (-1)

////////////////////////////////////////////////////////////
/// \brief Windows implementation of event flags
////////////////////////////////////////////////////////////
class EventFlagImpl : NonCopyable
{
public:
    ////////////////////////////////////////////////////////////
    /// \brief constructor
    ///
    ////////////////////////////////////////////////////////////
    EventFlagImpl(bool state=false);

    ////////////////////////////////////////////////////////////
    /// \brief Destructor
    ///
    ////////////////////////////////////////////////////////////
    ~EventFlagImpl();

    ////////////////////////////////////////////////////////////
    /// \brief Wait the event flag
    ///
    ////////////////////////////////////////////////////////////
    void wait(unsigned int timeout);

    ////////////////////////////////////////////////////////////
    /// \brief Signal the event flag
    ///
    ////////////////////////////////////////////////////////////
    void signal();

private:
    ////////////////////////////////////////////////////////////
    // Member data
    ////////////////////////////////////////////////////////////
    pthread_mutex_t mLock;
    pthread_cond_t  mAwake;
    bool            mEventFlag;
};

} // namespace priv
    
} // namespace sf

#endif // SFML_EVENTFLAGIMPL_HPP
